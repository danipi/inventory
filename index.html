<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Keep all previous styles -->
    <style>
        /* Previous styles remain unchanged */
        .security-warning {
            color: #e74c3c;
            background: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="security-warning">
        ‚ö†Ô∏è Security Notice: This token grants full repository access. Keep this page private!
    </div>

    <!-- Rest of the HTML remains the same (inputs, buttons, lists) -->

    <script>
        // Configuration - DO NOT SHARE THIS URL
        const REPO_OWNER = 'danipi';
        const REPO_NAME = 'inventory';
        const FILE_PATH = 'groceries.json';
        const GITHUB_TOKEN = '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'; // üîí Embedded token

        let groceries = [];
        let currentEditingItem = null;

        // Modified GitHub functions
        async function loadFromGitHub() {
            try {
                const response = await fetch(
                    `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${FILE_PATH}`,
                    {
                        headers: {
                            Authorization: `token ${GITHUB_TOKEN}`,
                            Accept: 'application/vnd.github.v3+json'
                        }
                    }
                );
                
                if (response.ok) {
                    const data = await response.json();
                    groceries = JSON.parse(atob(data.content));
                    updateUI();
                } else if (response.status === 404) {
                    await saveToGitHub();
                }
            } catch (error) {
                alert('Error loading data: ' + error.message);
            }
        }

        async function saveToGitHub() {
            const content = btoa(JSON.stringify(groceries));
            let sha = '';
            
            try {
                const getRes = await fetch(
                    `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${FILE_PATH}`,
                    { headers: { Authorization: `token ${GITHUB_TOKEN}` } }
                );
                if (getRes.ok) {
                    const data = await getRes.json();
                    sha = data.sha;
                }
            } catch {}

            try {
                await fetch(
                    `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${FILE_PATH}`,
                    {
                        method: 'PUT',
                        headers: {
                            Authorization: `token ${GITHUB_TOKEN}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update groceries',
                            content: content,
                            sha: sha
                        })
                    }
                );
            } catch (error) {
                alert('Error saving data: ' + error.message);
            }
        }

        // Remove all authentication-related functions
        // Keep all other functions (updateItem, UI handlers, etc.) unchanged

        // Initialize immediately
        window.addEventListener('load', loadFromGitHub);
    </script>
</body>
</html>
